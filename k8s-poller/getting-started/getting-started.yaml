mode:
  type: k8s-poller
  config:
    image_name: harbor.csis.astrazeneca.net/dataiku/hello-magnus:latest
    namespace: test
    config_path: ~/.kubeconfig
    polling_time: 10000
    secrets_to_use: ["afe-sit", "aws-afe-dev"]

run_log:
  type: s3
  config:
    s3_bucket: az-eu-dataiku-science-development
    region: eu-west-1 # defaults to eu-west-1
    use_credentials: True

secrets:
  type: env-secrets-manager

dag:
  description: Getting started
  start_at: step parameters
  steps:
    step parameters:
      type: task
      command_type: python-lambda
      command: "lambda x: {'x': int(x) + 1}"
      next: step shell
    step shell:
      type: task
      command_type: shell
      command: ls # For Linux/macOS
      next: success
      catalog:
        put:
          - "*"
    success:
      type: success
    fail:
      type: fail
